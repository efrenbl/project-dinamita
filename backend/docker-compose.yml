version: '3'

services:
  djangoapp:
    build: .
    volumes:
      - .:/src
    # networks:  
    #   - postgres_network  # <-- connect to the bridge
    depends_on:  # <-- wait for db to be "ready" before starting the app
      - postgres

  postgres:  # <-- IMPORTANT: same name as in DATABASES setting, otherwise Django won't find the database!
    image: postgres:10
    env_file: 
      - config/db/database1_env
  #   networks:  # <-- connect to the bridge
  #     - postgres_network
  #   volumes:
  #     - postgres_volume:/var/lib/postgresql/data

  # networks: 
  #   postgres_network:  # <-- add the bridge
  #     driver: bridge

  # volumes:
  #   postgres_volume: